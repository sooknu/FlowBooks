@tailwind base;
@tailwind components;
@tailwind utilities;

/* ─── Notion-Style Light Theme — Design System ────────────────── */

:root {
  /* Surface scale — warm neutrals (lightest to darkest) */
  --surface-50:  252 251 249;   /* page bg — #fcfbf9 */
  --surface-100: 247 246 243;   /* nested cards, badges, hover — #f7f6f3 */
  --surface-200: 233 232 228;   /* borders, dividers — #e9e8e4 */
  --surface-300: 211 209 205;   /* strong borders, input borders */
  --surface-400: 159 155 150;   /* placeholders, disabled text */
  --surface-500: 120 116 112;   /* secondary text, muted labels */
  --surface-600: 91 87 82;      /* body text, form labels */
  --surface-700: 68 64 60;      /* strong text */
  --surface-800: 55 53 47;      /* headings — Notion #37352f */
  --surface-900: 36 32 28;      /* near-black */
  --surface-950: 25 23 22;      /* black */

  /* Component tokens */
  --glass-bg: 255 255 255;
  --input-bg: 255 255 255;
  --input-border: 211 209 205;

  /* Sidebar tokens — Notion warm gray */
  --sidebar-bg: 247 247 245;
  --sidebar-hover: 0 0 0;
  --sidebar-active: 0 0 0;
  --sidebar-active-text: 25 23 22;
  --sidebar-text: 55 53 47;
  --sidebar-muted: 120 113 108;
  --sidebar-border: 235 235 230;

  /* Status colors */
  --color-success: 22 163 74;
  --color-danger: 220 38 38;

  /* shadcn compatibility — Notion blue accent */
  --background: 0 0% 100%;
  --foreground: 24 10% 10%;
  --card: 0 0% 100%;
  --card-foreground: 24 10% 10%;
  --popover: 0 0% 100%;
  --popover-foreground: 24 10% 10%;
  --primary: 211 78% 51%;
  --primary-foreground: 0 0% 100%;
  --secondary: 30 6% 94%;
  --secondary-foreground: 24 10% 22%;
  --accent: 211 78% 51%;
  --accent-foreground: 0 0% 100%;
  --muted: 30 6% 94%;
  --muted-foreground: 24 6% 46%;
  --border: 24 6% 83%;
  --input: 24 6% 83%;
  --destructive: 0 72% 51%;
  --destructive-foreground: 0 0% 98%;
  --ring: 211 78% 51%;
  --radius: 0.375rem;

  --accent-rgb: 35 131 226;

  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
}

/* ─── Dark Theme ──────────────────────────────────────────────── */

.dark {
  /* Surface scale — inverted warm neutrals */
  --surface-50:  25 25 23;      /* page bg */
  --surface-100: 32 32 30;      /* nested cards, badges, hover */
  --surface-200: 47 47 44;      /* borders, dividers */
  --surface-300: 63 63 58;      /* strong borders */
  --surface-400: 105 103 98;    /* placeholders, disabled text */
  --surface-500: 140 137 132;   /* secondary text, muted labels */
  --surface-600: 175 172 167;   /* body text, form labels */
  --surface-700: 200 198 194;   /* strong text */
  --surface-800: 225 224 220;   /* headings */
  --surface-900: 240 239 236;   /* near-white */
  --surface-950: 250 249 247;   /* white */

  /* Component tokens */
  --glass-bg: 32 32 30;
  --input-bg: 38 38 35;
  --input-border: 63 63 58;

  /* Sidebar tokens */
  --sidebar-bg: 25 25 23;
  --sidebar-hover: 255 255 255;
  --sidebar-active: 255 255 255;
  --sidebar-active-text: 255 255 255;
  --sidebar-text: 225 224 220;
  --sidebar-muted: 140 137 132;
  --sidebar-border: 47 47 44;

  /* Status colors — slightly brighter for dark bg */
  --color-success: 34 197 94;
  --color-danger: 239 68 68;

  /* shadcn compatibility — dark */
  --background: 0 0% 10%;
  --foreground: 30 6% 90%;
  --card: 0 0% 13%;
  --card-foreground: 30 6% 90%;
  --popover: 0 0% 13%;
  --popover-foreground: 30 6% 90%;
  --primary: 211 78% 56%;
  --primary-foreground: 0 0% 100%;
  --secondary: 30 4% 18%;
  --secondary-foreground: 30 6% 85%;
  --accent: 211 78% 56%;
  --accent-foreground: 0 0% 100%;
  --muted: 30 4% 18%;
  --muted-foreground: 24 6% 55%;
  --border: 30 4% 22%;
  --input: 30 4% 22%;
  --destructive: 0 72% 51%;
  --destructive-foreground: 0 0% 98%;
  --ring: 211 78% 56%;

  --accent-rgb: 56 145 237;

  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
  --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.4);
}

/* ─── Base Styles ──────────────────────────────────────────────── */

@layer base {
  html, body {
    overflow-x: hidden;
  }

  * {
    @apply border-border;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background-color: rgb(var(--surface-50));
    color: rgb(var(--surface-800));
    min-height: 100vh;
    padding: 0;
  }

  ::selection {
    background-color: rgba(var(--accent-rgb) / 0.18);
    color: inherit;
  }

  /* Scrollbar — subtle */
  ::-webkit-scrollbar {
    width: 4px;
    height: 4px;
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  ::-webkit-scrollbar-thumb {
    background: rgb(var(--surface-300));
    border-radius: 2px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: rgb(var(--surface-400));
  }

  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* ─── Component Classes ────────────────────────────────────────── */

@layer components {

  /* ── App container ──────────────────── */

  /* Use dvh to avoid iOS Safari address-bar snap on scroll */
  .app-shell {
    height: 100vh;
    height: 100dvh;
  }

  .app-container {
    @apply w-full mx-auto px-4 sm:px-6 lg:px-8 pb-12;
    max-width: 1440px;
  }

  /* ── Sidebar ────────────────────────── */

  .sidebar {
    background: rgb(var(--sidebar-bg));
    border-right: 1px solid rgb(var(--sidebar-border));
    overflow: hidden;
  }

  .sidebar-section-label {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    font-weight: 600;
    color: rgb(var(--sidebar-muted));
    padding: 16px 12px 4px;
  }

  .sidebar-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 10px;
    border-radius: 6px;
    color: rgb(var(--sidebar-muted));
    font-weight: 500;
    transition: all 0.1s ease;
    text-decoration: none;
  }
  .sidebar-item:hover {
    background: rgba(var(--sidebar-hover) / 0.04);
    color: rgb(var(--sidebar-text));
  }
  .sidebar-item--active {
    background: rgba(var(--sidebar-active) / 0.06);
    color: rgb(var(--sidebar-active-text));
    font-weight: 600;
  }

  .sidebar-scrollable {
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
  }
  .sidebar-scrollable:hover {
    scrollbar-color: rgb(var(--surface-300)) transparent;
  }

  /* ── Cards ──────────────────────────── */

  .glass-card {
    @apply rounded-md border relative overflow-hidden;
    background: rgb(var(--glass-bg));
    border-color: rgb(var(--surface-200));
    box-shadow: var(--shadow-sm);
  }

  .glass-elevated {
    @apply rounded-lg border relative overflow-hidden;
    background: rgb(var(--glass-bg));
    border-color: rgb(var(--surface-200));
    box-shadow: var(--shadow-md);
  }

  .glass-card.item-row {
    background: rgb(var(--surface-50));
    border-color: rgb(var(--surface-200));
    box-shadow: none;
  }

  /* Notion-style content card (standardised container) */
  .content-card {
    background: rgb(var(--glass-bg));
    border: 1px solid rgb(var(--surface-100));
    border-radius: 10px;
    overflow: hidden;
    box-shadow: var(--shadow-sm);
  }
  .content-card__row {
    background: rgb(var(--surface-50));
    border: 1px solid rgb(var(--surface-100));
    border-radius: 8px;
    overflow: hidden;
  }

  /* List cards */
  .list-card {
    @apply rounded-md border relative overflow-hidden transition-all duration-150 cursor-pointer;
    background: rgb(var(--glass-bg));
    border-color: rgb(var(--surface-200));
    box-shadow: var(--shadow-sm);
    border-left: 2px solid rgb(var(--surface-200));
  }
  .list-card:hover {
    background: rgb(var(--surface-50));
    border-color: rgb(var(--surface-300));
    box-shadow: var(--shadow-md);
  }
  .list-card--accent {
    border-left-color: rgba(var(--accent-rgb) / 0.5);
  }
  .list-card--accent:hover {
    border-left-color: rgba(var(--accent-rgb) / 0.8);
  }

  /* Flat nested card */
  .flat-card {
    @apply rounded-md border;
    border-color: rgb(var(--surface-200));
    background: rgb(var(--surface-50));
  }
  .flat-card--interactive {
    @apply cursor-pointer transition-colors;
  }
  .flat-card--interactive:hover {
    background: rgb(var(--surface-100));
  }

  /* ── Inputs ─────────────────────────── */

  .glass-input,
  .glass-select,
  .glass-textarea {
    @apply w-full rounded-md px-3 py-2 text-base md:text-sm outline-none border transition-all placeholder:opacity-50 disabled:opacity-60 disabled:cursor-not-allowed;
    font-family: inherit;
    color: rgb(var(--surface-800));
    background-color: rgb(var(--input-bg));
    border-color: rgb(var(--input-border));
  }
  .glass-input::placeholder,
  .glass-textarea::placeholder {
    color: rgb(var(--surface-400));
  }
  .glass-input:focus,
  .glass-select:focus,
  .glass-textarea:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 3px hsl(var(--primary) / 0.1);
  }

  /* iOS Safari: date/time inputs have oversized intrinsic width.
     appearance:none strips native chrome that causes overflow,
     while still showing the native picker on tap.
     Fixed height prevents collapse when value is empty. */
  input[type="date"].glass-input,
  input[type="time"].glass-input,
  input[type="datetime-local"].glass-input {
    -webkit-appearance: none;
    appearance: none;
    min-width: 0;
    max-width: 100%;
    height: 42px;
    line-height: 1.5;
  }

  /* ── Buttons (Notion-style BEM) ──────── */

  .action-btn {
    @apply inline-flex items-center justify-center gap-2 text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed;
    padding: 7px 16px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    color: hsl(var(--primary));
    background: hsl(var(--primary) / 0.1);
    transition: background 0.12s ease;
  }
  .action-btn:hover:not(:disabled) {
    background: hsl(var(--primary) / 0.18);
  }
  .action-btn--secondary {
    color: rgb(var(--surface-600));
    background: rgb(var(--surface-100));
  }
  .action-btn--secondary:hover:not(:disabled) {
    background: rgb(var(--surface-200) / 0.7);
  }
  .action-btn--danger {
    color: hsl(var(--destructive));
    background: hsl(var(--destructive) / 0.08);
  }
  .action-btn--danger:hover:not(:disabled) {
    background: hsl(var(--destructive) / 0.15);
  }
  .action-btn__icon {
    width: 14px;
    height: 14px;
  }

  .icon-button {
    @apply inline-flex items-center justify-center rounded-md p-2 transition-all duration-150;
    color: rgb(var(--surface-500));
    background: rgb(var(--surface-100));
    border: none;
  }
  .icon-button:hover {
    background: rgb(var(--surface-200) / 0.7);
    color: rgb(var(--surface-700));
  }

  /* ── In-View Tab Navigation ────────── */

  .nav-tabs {
    @apply inline-flex items-center relative scroll-mt-14 lg:scroll-mt-0;
    border-bottom: 1px solid rgb(var(--surface-200));
  }

  .nav-tab {
    color: rgb(var(--surface-400));
    font-weight: 500;
    cursor: pointer;
  }
  .nav-tab:hover {
    color: rgb(var(--surface-600));
  }

  .nav-tab--active,
  .nav-tab--active:hover {
    color: rgb(var(--surface-800));
  }

  .nav-tab__glass {
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 2px;
    border-radius: 1px 1px 0 0;
    background: rgb(var(--surface-800));
  }

  /* ── Chips / Badges ─────────────────── */

  .chip {
    @apply inline-flex items-center gap-1 rounded-md px-2.5 py-1 text-xs font-medium border;
    background: rgb(var(--surface-100));
    border-color: rgb(var(--surface-200));
    color: rgb(var(--surface-600));
  }

  /* ── User Row ──────────────────────── */

  .user-row {
    @apply flex items-center gap-3 px-4 py-3 transition-colors;
    border-bottom: 1px solid rgba(var(--surface-200) / 0.5);
  }
  .user-row:last-child {
    border-bottom: none;
  }
  .user-row:hover {
    background: rgb(var(--surface-50));
  }

  .user-row--pending {
    border-left: 3px solid rgb(245 158 11); /* amber-500 */
    padding-left: calc(0.875rem - 3px);
  }
  @media (max-width: 767px) {
    .user-row--pending {
      @apply py-3.5 px-3.5;
      padding-left: calc(0.875rem - 3px);
    }
  }

  .user-row__body {
    @apply flex-1 min-w-0;
  }
  .user-row__name {
    font-size: 13px;
    font-weight: 600;
    color: rgb(var(--surface-800));
    @apply truncate leading-tight;
  }
  .user-row__email {
    font-size: 11.5px;
    color: rgb(var(--surface-400));
    @apply truncate leading-tight;
    margin-top: 1px;
  }

  .user-row__meta {
    @apply hidden sm:flex items-center gap-2 shrink-0;
  }

  .user-row__badge {
    font-size: 10px;
    font-weight: 500;
    letter-spacing: 0.02em;
    @apply px-2 py-0.5 rounded-full leading-tight capitalize;
    background: rgb(var(--surface-100));
    color: rgb(var(--surface-500));
  }
  .user-row__badge--admin {
    background: rgb(243 232 255); /* violet-100 */
    color: rgb(109 40 217); /* violet-700 */
  }
  .user-row__badge--super {
    background: rgb(255 251 235); /* amber-50 */
    color: rgb(180 83 9); /* amber-700 */
  }

  .user-row__verified {
    @apply flex items-center gap-0.5;
    font-size: 10.5px;
  }
  .user-row__verified svg {
    @apply w-3 h-3;
  }

  .user-row__date {
    font-size: 10.5px;
    color: rgb(var(--surface-400));
    white-space: nowrap;
    @apply hidden lg:block;
  }

  .user-row__actions {
    @apply flex items-center gap-0.5 shrink-0;
    display: none;
  }
  .user-row:hover .user-row__actions {
    display: flex;
  }
  @media (max-width: 1023px) {
    .user-row__actions {
      display: flex;
    }
    .user-row:hover .user-row__actions {
      display: flex;
    }
  }

  .user-row__action {
    @apply p-1.5 rounded-md transition-all duration-150;
    color: rgb(var(--surface-400));
  }
  .user-row__action:hover {
    color: rgb(var(--surface-700));
    background: rgb(var(--surface-100));
  }
  .user-row__action--danger:hover {
    color: rgb(239 68 68);
    background: rgb(254 242 242);
  }
  .user-row__action--success:hover {
    color: rgb(16 185 129);
    background: rgb(236 253 245);
  }
  .user-row__action--warning:hover {
    color: rgb(245 158 11);
    background: rgb(255 251 235);
  }

  /* Pending row: inline approve/reject actions always visible */
  .user-row--pending .user-row__approve-actions {
    @apply items-center gap-1.5 shrink-0;
  }

  /* Avatar variant — for team members with profile images */
  .user-row__avatar {
    @apply w-7 h-7 rounded-full shrink-0 overflow-hidden;
  }

  .user-row__inactive {
    font-size: 9px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    @apply px-1.5 py-0.5 rounded-full leading-tight;
    background: rgb(var(--surface-100));
    color: rgb(var(--surface-400));
  }

  /* ── Project Hero ──────────────────── */

  .project-hero {
    @apply w-full rounded-xl border overflow-hidden;
    background: rgb(var(--glass-bg));
    border-color: rgba(var(--surface-200) / 0.6);
    padding: 1.25rem 1.5rem;
    position: relative;
  }

  .project-hero__layout {
    display: flex;
    flex-direction: column;
    gap: 0.875rem;
  }

  .project-hero__body {
    @apply flex-1 min-w-0;
  }

  .project-hero__header {
    @apply flex items-center gap-2.5 min-w-0 flex-wrap;
    margin-bottom: 0.5rem;
  }

  .project-hero__title {
    font-size: clamp(1.125rem, 4vw, 1.375rem);
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: -0.01em;
    color: rgb(var(--surface-800));
    word-break: break-word;
  }

  .project-hero__pill {
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.03em;
    text-transform: uppercase;
    margin-bottom: 0.375rem;
    @apply inline-block px-2.5 py-0.5 rounded-full leading-tight text-[#C8C6C2] shrink-0;
  }

  .project-hero__meta {
    @apply flex items-center flex-wrap;
    gap: 0.5rem;
  }

  .project-hero__meta-item {
    @apply flex items-center gap-1.5 leading-tight;
    font-size: 13px;
    color: rgb(var(--surface-500));
  }
  .project-hero__meta-item svg {
    @apply w-3.5 h-3.5 shrink-0;
    color: rgb(var(--surface-400));
  }

  .project-hero__meta-link {
    @apply flex items-center gap-1.5 leading-tight transition-colors;
    font-size: 13px;
    color: rgb(var(--surface-500));
  }
  .project-hero__meta-link svg {
    @apply w-3.5 h-3.5 shrink-0;
    color: rgb(var(--surface-400));
  }
  .project-hero__meta-link:hover {
    color: rgb(var(--surface-700));
  }
  .project-hero__meta-link:hover svg {
    color: rgb(var(--surface-600));
  }

  .project-hero__dot {
    @apply w-1 h-1 rounded-full shrink-0;
    background: rgb(var(--surface-300));
  }
  .project-hero__meta > .project-hero__dot:first-child {
    display: none;
  }

  .project-hero__actions {
    @apply flex items-center gap-1.5 shrink-0;
    order: -1;
    align-self: flex-end;
  }

  .project-hero__action-btn {
    @apply p-2 rounded-lg transition-all duration-200;
    color: rgb(var(--surface-400));
  }
  .project-hero__action-btn:hover {
    color: rgb(var(--surface-700));
    background: rgb(var(--surface-100));
  }
  /* Status badge (shared between select and read-only) */
  .project-hero__status {
    @apply inline-flex items-center gap-2 rounded-full ring-1;
    padding: 0.375rem 0.75rem;
  }
  .project-hero__status-dot {
    @apply w-2 h-2 rounded-full shrink-0;
  }
  .project-hero__status-label {
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.04em;
    text-transform: uppercase;
  }
  .project-hero__status-select {
    @apply appearance-none bg-transparent cursor-pointer focus:outline-none;
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    padding-left: 1.5rem;
    padding-right: 1.75rem;
  }
  .project-hero__status-chevron {
    @apply absolute right-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 pointer-events-none opacity-50;
  }

  /* ── Project Hero with cover photo ── */

  @keyframes heroImageReveal {
    from { transform: scale(1.06); opacity: 0; }
    to   { transform: scale(1);    opacity: 1; }
  }

  .project-hero--has-photo {
    min-height: 220px;
    border: 1px solid rgba(var(--surface-200) / 0.6);
    border-top-width: 1px;
    border-top-color: rgba(var(--surface-200) / 0.6);
    border-bottom-width: 3px;
  }

  /* Photo variant: status accent on bottom instead of top */
  .project-hero--has-photo[data-status="lead"],
  .project-hero--has-photo[data-status="archived"]  { border-bottom-color: rgb(var(--surface-300)); }
  .project-hero--has-photo[data-status="booked"]    { border-bottom-color: rgb(59 130 246); }
  .project-hero--has-photo[data-status="shooting"]  { border-bottom-color: rgb(244 63 94); }
  .project-hero--has-photo[data-status="editing"]   { border-bottom-color: rgb(245 158 11); }
  .project-hero--has-photo[data-status="delivered"],
  .project-hero--has-photo[data-status="completed"] { border-bottom-color: rgb(16 185 129); }

  .project-hero__image {
    position: absolute;
    inset: 0;
    background-size: cover;
    background-position: center;
    border-radius: inherit;
    animation: heroImageReveal 0.7s ease-out both;
  }

  .project-hero__photo-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      to top,
      rgba(255,255,255,0.95) 0%,
      rgba(255,255,255,0.75) 35%,
      rgba(255,255,255,0.30) 65%,
      rgba(255,255,255,0.05) 100%
    );
    border-radius: inherit;
    pointer-events: none;
  }

  .project-hero--has-photo .project-hero__body {
    position: absolute;
    bottom: 1.5rem;
    left: 1.5rem;
    right: 1.5rem;
    z-index: 2;
  }

  .project-hero--has-photo .project-hero__actions {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    z-index: 2;
  }

  /* Photo hero: ensure text is dark enough over the white wash */
  .project-hero--has-photo .project-hero__title {
    color: rgb(var(--surface-900));
  }
  .project-hero--has-photo .project-hero__meta-item,
  .project-hero--has-photo .project-hero__meta-link {
    color: rgb(var(--surface-700));
  }
  .project-hero--has-photo .project-hero__meta-item svg,
  .project-hero--has-photo .project-hero__meta-link svg {
    color: rgb(var(--surface-600));
  }
  .project-hero--has-photo .project-hero__dot {
    background: rgb(var(--surface-400));
  }
  .project-hero--has-photo .project-hero__action-btn {
    color: rgb(var(--surface-500));
    background: rgba(255,255,255,0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: 0 1px 3px rgba(0,0,0,0.06);
  }
  .project-hero--has-photo .project-hero__action-btn:hover {
    color: rgb(var(--surface-800));
    background: rgba(255,255,255,0.88);
  }
  .project-hero--has-photo .project-hero__status {
    background: rgba(255,255,255,0.75) !important;
    --tw-ring-color: rgba(var(--surface-300) / 0.4) !important;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: 0 1px 3px rgba(0,0,0,0.06);
  }

  /* ── Dark mode: flip photo overlay to black ── */
  .dark .project-hero__photo-overlay {
    background: linear-gradient(
      to top,
      rgba(0,0,0,0.95) 0%,
      rgba(0,0,0,0.75) 35%,
      rgba(0,0,0,0.30) 65%,
      rgba(0,0,0,0.05) 100%
    );
  }
  .dark .project-hero--has-photo .project-hero__action-btn {
    color: rgb(var(--surface-500));
    background: rgba(0,0,0,0.5);
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  }
  .dark .project-hero--has-photo .project-hero__action-btn:hover {
    color: rgb(var(--surface-800));
    background: rgba(0,0,0,0.65);
  }
  .dark .project-hero--has-photo .project-hero__status {
    background: rgba(0,0,0,0.55) !important;
    --tw-ring-color: rgba(255,255,255,0.12) !important;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  }

  @media (min-width: 768px) {
    .project-hero {
      padding: 1.5rem 1.75rem;
    }
    .project-hero__title {
      font-size: clamp(1.25rem, 2.5vw, 1.625rem);
    }
    /* Photo variant grows taller on desktop */
    .project-hero--has-photo {
      min-height: 300px;
    }
    .project-hero--has-photo .project-hero__body {
      bottom: 2rem;
      left: 2rem;
      right: 2rem;
    }
    .project-hero--has-photo .project-hero__actions {
      top: 1.75rem;
      right: 2rem;
    }
    .project-hero--has-photo .project-hero__title {
      font-size: clamp(1.5rem, 3vw, 2rem);
    }
  }

  /* Force vertical scroll on swipe-to-archive cards (Framer Motion sets touch-action:none) */
  .swipe-card {
    touch-action: pan-y !important;
  }

  /* ── Project Filter Bar ───────────── */

  .project-filter-bar {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 0.625rem;
    border-radius: 0.75rem;
    background: rgb(var(--surface-50));
    border: 1px solid rgba(var(--surface-200) / 0.7);
  }

  /* Status tabs row */
  .project-filter-bar__status {
    display: flex;
    gap: 0.125rem;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    padding: 0.125rem;
    border-radius: 0.5rem;
    background: rgb(var(--surface-100));
  }
  .project-filter-bar__status::-webkit-scrollbar { display: none; }

  .project-filter-bar__status-btn {
    padding: 0.375rem 0.75rem;
    font-size: 0.8125rem;
    font-weight: 500;
    white-space: nowrap;
    flex-shrink: 0;
    border-radius: 0.375rem;
    color: rgb(var(--surface-500));
    transition: all 0.15s ease;
  }
  .project-filter-bar__status-btn:hover {
    color: rgb(var(--surface-700));
  }
  .project-filter-bar__status-btn--active {
    background: rgb(var(--glass-bg));
    color: rgb(var(--surface-800));
    box-shadow: 0 1px 2px rgba(0,0,0,0.06);
  }

  /* Second row: year + type + financial */
  .project-filter-bar__filters {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.375rem;
  }

  /* Year button group */
  .project-filter-bar__group {
    display: flex;
    gap: 0.125rem;
    padding: 0.125rem;
    border-radius: 0.5rem;
    background: rgb(var(--surface-100));
  }

  .project-filter-bar__year-btn {
    padding: 0.3125rem 0.625rem;
    font-size: 0.6875rem;
    font-weight: 600;
    letter-spacing: 0.01em;
    border-radius: 0.375rem;
    color: rgb(var(--surface-500));
    transition: all 0.15s ease;
    white-space: nowrap;
  }
  .project-filter-bar__year-btn:hover {
    color: rgb(var(--surface-700));
  }
  .project-filter-bar__year-btn--active {
    background: rgb(var(--glass-bg));
    color: rgb(var(--surface-800));
    box-shadow: 0 1px 2px rgba(0,0,0,0.06);
  }

  /* Vertical divider */
  .project-filter-bar__divider {
    width: 1px;
    height: 1.125rem;
    background: rgb(var(--surface-200));
    flex-shrink: 0;
  }

  /* Select (event type) */
  .project-filter-bar__select {
    appearance: none;
    padding: 0.3125rem 1.5rem 0.3125rem 0.625rem;
    font-size: 0.6875rem;
    font-weight: 600;
    border-radius: 0.5rem;
    border: 1px solid transparent;
    background: rgb(var(--surface-100));
    color: rgb(var(--surface-500));
    cursor: pointer;
    transition: all 0.15s ease;
  }
  .project-filter-bar__select:hover {
    color: rgb(var(--surface-700));
  }
  .project-filter-bar__select--active {
    background: rgb(var(--glass-bg));
    border-color: rgba(var(--surface-300) / 0.6);
    color: rgb(var(--surface-800));
    box-shadow: 0 1px 2px rgba(0,0,0,0.06);
  }

  /* Filter chip buttons (Balance, Profit) */
  .project-filter-bar__chip {
    display: flex;
    align-items: center;
    gap: 0.3125rem;
    padding: 0.3125rem 0.625rem;
    font-size: 0.6875rem;
    font-weight: 600;
    border-radius: 0.5rem;
    border: 1px solid transparent;
    background: rgb(var(--surface-100));
    color: rgb(var(--surface-500));
    transition: all 0.15s ease;
    cursor: pointer;
  }
  .project-filter-bar__chip:hover {
    color: rgb(var(--surface-700));
  }
  .project-filter-bar__chip--balance {
    background: #fffbeb;
    color: #b45309;
    border-color: #fde68a;
  }
  .project-filter-bar__chip--profit {
    background: #ecfdf5;
    color: #047857;
    border-color: #a7f3d0;
  }

  /* Clear button */
  .project-filter-bar__clear {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.3125rem 0.5rem;
    font-size: 0.625rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    border-radius: 0.375rem;
    color: rgb(var(--surface-400));
    transition: color 0.15s ease;
    overflow: hidden;
    cursor: pointer;
  }
  .project-filter-bar__clear:hover {
    color: rgb(var(--surface-700));
  }

  /* Active filters summary row */
  .project-filter-bar__active {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.375rem;
    padding-top: 0.375rem;
    border-top: 1px solid rgba(var(--surface-200) / 0.5);
    overflow: hidden;
  }

  .project-filter-bar__active-label {
    font-size: 0.625rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: rgb(var(--surface-400));
    padding-right: 0.125rem;
  }

  .project-filter-bar__active-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.1875rem 0.5rem;
    font-size: 0.6875rem;
    font-weight: 600;
    border-radius: 999px;
    border: 1px solid;
    line-height: 1.2;
  }
  .project-filter-bar__active-chip--year {
    background: #eff6ff;
    color: #1d4ed8;
    border-color: #bfdbfe;
  }
  .project-filter-bar__active-chip--type {
    background: #faf5ff;
    color: #7e22ce;
    border-color: #e9d5ff;
  }
  .project-filter-bar__active-chip--balance {
    background: #fffbeb;
    color: #b45309;
    border-color: #fde68a;
  }
  .project-filter-bar__active-chip--profit {
    background: #ecfdf5;
    color: #047857;
    border-color: #a7f3d0;
  }

  .project-filter-bar__active-x {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-left: 0.0625rem;
    padding: 0.0625rem;
    border-radius: 999px;
    opacity: 0.5;
    transition: opacity 0.15s ease;
    cursor: pointer;
  }
  .project-filter-bar__active-x:hover {
    opacity: 1;
  }

  /* ── Dark mode overrides ── */
  .dark .project-filter-bar {
    background: rgba(var(--surface-100) / 0.4);
    border-color: rgba(var(--surface-200) / 0.3);
  }
  .dark .project-filter-bar__status {
    background: rgba(var(--surface-200) / 0.3);
  }
  .dark .project-filter-bar__status-btn--active {
    background: rgba(var(--surface-300) / 0.3);
    color: #C8C6C2;
  }
  .dark .project-filter-bar__group {
    background: rgba(var(--surface-200) / 0.3);
  }
  .dark .project-filter-bar__year-btn--active {
    background: rgba(var(--surface-300) / 0.3);
    color: #C8C6C2;
  }
  .dark .project-filter-bar__divider {
    background: rgba(var(--surface-300) / 0.3);
  }
  .dark .project-filter-bar__select {
    background: rgba(var(--surface-200) / 0.3);
    color: rgb(var(--surface-400));
  }
  .dark .project-filter-bar__select--active {
    background: rgba(var(--surface-300) / 0.3);
    border-color: rgba(var(--surface-400) / 0.3);
    color: #C8C6C2;
  }
  .dark .project-filter-bar__chip {
    background: rgba(var(--surface-200) / 0.3);
    color: rgb(var(--surface-400));
  }
  .dark .project-filter-bar__chip--balance {
    background: rgba(180, 83, 9, 0.12);
    color: #fbbf24;
    border-color: rgba(251, 191, 36, 0.25);
  }
  .dark .project-filter-bar__chip--profit {
    background: rgba(4, 120, 87, 0.12);
    color: #34d399;
    border-color: rgba(52, 211, 153, 0.25);
  }
  .dark .project-filter-bar__active {
    border-top-color: rgba(var(--surface-300) / 0.2);
  }
  .dark .project-filter-bar__active-chip--year {
    background: rgba(29, 78, 216, 0.12);
    color: #60a5fa;
    border-color: rgba(96, 165, 250, 0.25);
  }
  .dark .project-filter-bar__active-chip--type {
    background: rgba(126, 34, 206, 0.12);
    color: #c084fc;
    border-color: rgba(192, 132, 252, 0.25);
  }
  .dark .project-filter-bar__active-chip--balance {
    background: rgba(180, 83, 9, 0.12);
    color: #fbbf24;
    border-color: rgba(251, 191, 36, 0.25);
  }
  .dark .project-filter-bar__active-chip--profit {
    background: rgba(4, 120, 87, 0.12);
    color: #34d399;
    border-color: rgba(52, 211, 153, 0.25);
  }

  /* ── Project Documents ────────────── */

  .project-docs__drop {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 1.25rem;
    border: 2px dashed rgba(var(--surface-300) / 0.6);
    border-radius: 0.75rem;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  @media (min-width: 640px) {
    .project-docs__drop { padding: 2rem; }
  }
  .project-docs__drop:hover,
  .project-docs__drop--active {
    border-color: hsl(var(--primary));
    background: rgba(var(--surface-100) / 0.5);
  }
  .project-docs__drop--mini {
    flex-direction: row;
    gap: 0.5rem;
    padding: 0.625rem;
    border-width: 1.5px;
    border-style: dashed;
  }

  .project-docs__item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.625rem 0.75rem;
    border-radius: 0.625rem;
    border: 1px solid rgba(var(--surface-200) / 0.6);
    background: rgb(var(--glass-bg));
    transition: box-shadow 0.15s ease, background 0.15s ease;
  }
  .project-docs__item--clickable {
    cursor: pointer;
    outline: none;
  }
  .project-docs__item--clickable:hover {
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    background: rgba(var(--surface-100) / 0.7);
  }
  .project-docs__item--clickable:focus-visible {
    box-shadow: 0 0 0 2px hsl(var(--primary) / 0.4);
  }

  .project-docs__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    border-radius: 0.5rem;
    flex-shrink: 0;
  }

  .project-docs__thumb {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 0.375rem;
    overflow: hidden;
    flex-shrink: 0;
    background: rgba(var(--surface-100));
  }
  .project-docs__thumb-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* ── Photo Lightbox ──────────────────── */

  .photo-lightbox__overlay {
    position: fixed;
    inset: 0;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.88);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  .photo-lightbox__topbar {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 1.25rem;
    background: linear-gradient(to bottom, rgba(0,0,0,0.6), transparent);
    z-index: 2;
  }

  .photo-lightbox__filename {
    font-size: 0.875rem;
    font-weight: 500;
    color: rgba(255,255,255,0.85);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 60%;
  }

  .photo-lightbox__btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.25rem;
    height: 2.25rem;
    border-radius: 0.5rem;
    color: rgba(255,255,255,0.8);
    transition: background 0.15s, color 0.15s;
    background: transparent;
    border: none;
    cursor: pointer;
  }
  .photo-lightbox__btn:hover {
    background: rgba(255,255,255,0.15);
    color: #C8C6C2;
  }

  .photo-lightbox__img {
    max-width: 90vw;
    max-height: 82vh;
    object-fit: contain;
    border-radius: 0.5rem;
    box-shadow: 0 8px 40px rgba(0,0,0,0.5);
    user-select: none;
    -webkit-user-select: none;
  }

  .photo-lightbox__arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.75rem;
    height: 2.75rem;
    border-radius: 50%;
    background: rgba(255,255,255,0.1);
    color: rgba(255,255,255,0.8);
    border: none;
    cursor: pointer;
    transition: background 0.15s, color 0.15s;
    z-index: 2;
  }
  .photo-lightbox__arrow:hover {
    background: rgba(255,255,255,0.2);
    color: #C8C6C2;
  }
  .photo-lightbox__arrow--left { left: 1rem; }
  .photo-lightbox__arrow--right { right: 1rem; }

  .photo-lightbox__counter {
    position: absolute;
    bottom: 1.25rem;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.8rem;
    font-weight: 500;
    color: rgba(255,255,255,0.6);
    background: rgba(0,0,0,0.4);
    padding: 0.25rem 0.75rem;
    border-radius: 1rem;
    z-index: 2;
  }

  /* ── Reports Page ─────────────────────── */

  .rpt-page {
    @apply max-w-5xl mx-auto px-4 py-6;
  }
  .rpt-page__header {
    @apply flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8;
  }
  .rpt-page__title {
    @apply text-2xl font-bold;
    color: rgb(var(--surface-900));
  }
  .rpt-page__subtitle {
    @apply text-sm mt-0.5;
    color: rgb(var(--surface-400));
  }

  /* Year picker */
  .rpt-year-picker {
    @apply flex gap-1 p-1 rounded-lg;
    background: rgb(var(--surface-100));
  }
  .rpt-year-btn {
    @apply px-4 py-1.5 text-sm font-medium rounded-md transition-all;
    color: rgb(var(--surface-500));
  }
  .rpt-year-btn:hover { color: rgb(var(--surface-700)); }
  .rpt-year-btn--active {
    background: rgb(var(--glass-bg));
    color: rgb(var(--surface-900));
    box-shadow: 0 1px 3px rgba(0,0,0,0.08);
  }
  .dark .rpt-year-btn--active {
    background: rgba(var(--surface-200) / 0.8);
    color: rgb(var(--surface-900));
    box-shadow: 0 1px 3px rgba(0,0,0,0.3);
  }

  /* Sections */
  .rpt-section { @apply mb-8; }
  .rpt-section__label {
    @apply text-xs font-semibold uppercase tracking-wider mb-3 px-1;
    color: rgb(var(--surface-400));
    letter-spacing: 0.08em;
  }
  .rpt-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 0.75rem;
  }

  /* ── Report Card ───────── */
  .rpt-card {
    @apply w-full text-left rounded-xl border overflow-hidden;
    background: rgb(var(--glass-bg));
    border-color: rgba(var(--surface-200) / 0.6);
    border-left: 3px solid var(--card-accent, rgb(var(--surface-300)));
    padding: 1rem 1.125rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    cursor: pointer;
    transition: box-shadow 0.2s, border-color 0.2s, transform 0.2s;
  }
  .rpt-card:hover {
    box-shadow: 0 4px 16px rgba(0,0,0,0.06);
    border-color: rgba(var(--surface-300) / 0.8);
    border-left-color: var(--card-accent);
    transform: translateY(-1px);
  }
  .rpt-card:active { transform: translateY(0); }

  .rpt-card__top {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .rpt-card__icon-wrap {
    @apply flex items-center justify-center w-6 h-6 rounded-md;
    color: var(--card-accent);
    background: var(--card-accent-bg, rgb(var(--surface-100)));
  }
  .rpt-card__title {
    @apply text-xs font-semibold flex-1;
    color: rgb(var(--surface-500));
    letter-spacing: 0.02em;
  }
  .rpt-card__arrow {
    color: rgb(var(--surface-300));
    transition: color 0.2s, transform 0.2s;
  }
  .rpt-card:hover .rpt-card__arrow {
    color: var(--card-accent);
    transform: translateX(2px);
  }

  .rpt-card__body { @apply flex-1; }
  .rpt-card__headline {
    @apply text-xl font-bold tabular-nums;
    color: rgb(var(--surface-900));
    line-height: 1.2;
  }
  .rpt-card__label {
    @apply text-xs mt-0.5;
    color: rgb(var(--surface-400));
  }
  .rpt-card__chart {
    height: 48px;
    margin: 0 -0.25rem;
  }
  .rpt-card__sub {
    @apply text-xs tabular-nums;
    color: rgb(var(--surface-400));
  }

  /* ── Mini Charts ───────── */
  .rpt-chart-svg {
    width: 100%;
    height: 100%;
    display: block;
  }
  .rpt-hbar-mini {
    display: flex;
    flex-direction: column;
    gap: 4px;
    height: 100%;
    justify-content: center;
  }
  .rpt-hbar-mini__row {
    height: 6px;
    background: rgb(var(--surface-100));
    border-radius: 3px;
    overflow: hidden;
  }
  .rpt-hbar-mini__bar {
    height: 100%;
    border-radius: 3px;
    min-width: 4px;
  }
  .rpt-donut-mini {
    width: 48px;
    height: 48px;
  }

  /* ── Detail Page ───────── */
  .rpt-detail__header {
    @apply flex items-center justify-between gap-4 mb-6;
  }
  .rpt-detail__back {
    @apply flex items-center gap-1.5 text-sm font-medium px-2 py-1 -ml-2 rounded-lg transition-colors;
    color: rgb(var(--surface-500));
  }
  .rpt-detail__back:hover {
    color: rgb(var(--surface-800));
    background: rgb(var(--surface-100));
  }

  .rpt-detail__hero {
    @apply rounded-xl border p-6 mb-6;
    background: var(--card-accent-bg, rgb(var(--surface-50)));
    border-color: rgba(var(--surface-200) / 0.5);
  }
  .rpt-detail__hero-icon {
    @apply inline-flex items-center justify-center w-8 h-8 rounded-lg mb-3;
    color: var(--card-accent);
    background: rgb(var(--glass-bg));
    box-shadow: 0 1px 3px rgba(0,0,0,0.06);
  }
  .rpt-detail__hero-title {
    @apply text-lg font-bold mb-1;
    color: rgb(var(--surface-800));
  }
  .rpt-detail__hero-headline {
    @apply text-3xl font-bold tabular-nums;
    color: rgb(var(--surface-900));
  }
  .rpt-detail__hero-label {
    @apply text-sm mt-0.5;
    color: rgb(var(--surface-500));
  }

  .rpt-detail__content {
    @apply space-y-6;
  }
  .rpt-detail__metrics {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 0.75rem;
  }
  .rpt-metric {
    @apply rounded-lg border p-4;
    background: rgb(var(--glass-bg));
    border-color: rgba(var(--surface-200) / 0.5);
  }
  .rpt-metric__value {
    @apply text-lg font-bold tabular-nums;
    color: rgb(var(--surface-900));
  }
  .rpt-metric__label {
    @apply text-xs mt-0.5;
    color: rgb(var(--surface-400));
  }

  .rpt-detail__section-title {
    @apply text-xs font-semibold uppercase tracking-wider mb-3;
    color: rgb(var(--surface-400));
    letter-spacing: 0.08em;
  }

  /* Detail h-bars */
  .rpt-detail__hbars {
    @apply space-y-2;
  }
  .rpt-detail__hbar-row {
    display: grid;
    grid-template-columns: minmax(100px, 160px) 1fr auto;
    gap: 0.75rem;
    align-items: center;
  }
  .rpt-detail__hbar-label {
    @apply flex items-center gap-2 text-sm truncate;
    color: rgb(var(--surface-700));
  }
  .rpt-detail__hbar-dot {
    @apply w-2.5 h-2.5 rounded-full shrink-0;
  }
  .rpt-detail__hbar-track {
    height: 8px;
    background: rgb(var(--surface-100));
    border-radius: 4px;
    overflow: hidden;
  }
  .rpt-detail__hbar-fill {
    height: 100%;
    border-radius: 4px;
    min-width: 4px;
    opacity: 0.65;
  }
  .rpt-detail__hbar-value {
    @apply text-sm font-medium tabular-nums text-right;
    color: rgb(var(--surface-700));
    min-width: 70px;
  }

  /* Detail donut */
  .rpt-detail__donut-wrap {
    @apply flex justify-center py-4;
  }
  .rpt-detail__donut {
    width: 140px;
    height: 140px;
  }

  /* ── Data Tables ───────── */
  .rpt-table-wrap {
    @apply overflow-x-auto -mx-1;
  }
  .rpt-table {
    @apply w-full text-sm;
    border-collapse: collapse;
  }
  .rpt-table th {
    @apply px-3 py-2 text-left text-xs font-semibold uppercase tracking-wider;
    color: rgb(var(--surface-400));
    border-bottom: 1px solid rgba(var(--surface-200) / 0.6);
  }
  .rpt-table td {
    @apply px-3 py-2;
    color: rgb(var(--surface-700));
    border-bottom: 1px solid rgba(var(--surface-100) / 0.8);
  }
  .rpt-table tbody tr:hover td {
    background: rgba(var(--surface-50) / 0.5);
  }
  .rpt-table tfoot td {
    border-top: 2px solid rgba(var(--surface-200) / 0.8);
    border-bottom: none;
    color: rgb(var(--surface-900));
  }

  /* ── Dashboard Cards ──────────────────── */

  .dash-fin {
    @apply min-w-0 h-full transition-colors;
    padding: 14px 16px;
  }
  @screen sm { .dash-fin { padding: 16px 20px; } }

  .dash-fin--green  { background: rgba(68,131,97,0.06); }
  .dash-fin--red    { background: rgba(212,76,71,0.06); }
  .dash-fin--neutral { background: rgba(55,53,47,0.03); }

  .dash-fin__value {
    @apply tabular-nums leading-none tracking-tight truncate font-bold;
    font-size: clamp(1rem, 4vw, 2.25rem);
    color: rgb(var(--surface-700));
  }
  .dash-fin__value--hero { font-weight: 800; }
  .dash-fin__value--green { color: rgb(68,131,97); }
  .dash-fin__value--red   { color: rgb(212,76,71); }

  .dash-fin__label {
    @apply font-medium uppercase truncate;
    font-size: 10px;
    letter-spacing: 0.08em;
    color: rgb(var(--surface-400));
    margin-top: 8px;
  }
  @screen sm { .dash-fin__label { font-size: 12px; margin-top: 10px; } }

  .dash-fin__breakdown {
    @apply flex gap-4;
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px solid rgb(var(--surface-100));
  }
  .dash-fin__sub { @apply min-w-0; }
  .dash-fin__sub-value {
    @apply font-semibold tabular-nums truncate;
    font-size: clamp(11px, 2.5vw, 14px);
    color: rgb(var(--surface-600));
  }
  .dash-fin__sub-label {
    @apply uppercase;
    font-size: 9px;
    letter-spacing: 0.05em;
    color: rgb(var(--surface-400));
  }

  .dash-stat {
    @apply flex items-center gap-3 text-left;
    padding: 14px 16px;
  }
  .dash-stat:hover { box-shadow: 0 1px 4px rgba(0,0,0,0.04); }
  .dash-stat__icon {
    @apply shrink-0 flex items-center justify-center rounded-lg;
    width: 36px;
    height: 36px;
    background: rgb(var(--surface-100));
  }
  .dash-stat__icon svg {
    width: 18px;
    height: 18px;
    color: rgb(var(--surface-400));
  }
  .dash-stat__body { @apply min-w-0; }
  .dash-stat__value {
    @apply text-xl font-bold tabular-nums leading-none;
  }
  .dash-stat__label {
    @apply text-muted-foreground;
    font-size: 11px;
    margin-top: 4px;
  }

  .dash-section {
    @apply flex items-center justify-between;
    margin-bottom: 8px;
  }
  .dash-section__title {
    @apply text-xs font-semibold uppercase text-muted-foreground;
    letter-spacing: 0.1em;
  }
  .dash-section__action {
    @apply flex items-center gap-1 text-muted-foreground transition-colors;
    font-size: 11px;
  }
  .dash-section__action:hover { color: rgb(var(--surface-800)); }

  .dash-doc-row {
    @apply w-full flex items-center gap-3 text-left transition-colors rounded-lg;
    padding: 10px 8px;
  }
  .dash-doc-row:hover { background: rgb(var(--surface-100)); }
  .dash-doc-row__number {
    @apply text-xs font-mono text-muted-foreground shrink-0;
  }
  .dash-doc-row__name {
    @apply text-sm truncate flex-1 min-w-0;
  }
  .dash-doc-row__status {
    @apply shrink-0 font-medium px-1.5 py-0.5 rounded capitalize;
    font-size: 10px;
    background: rgb(var(--surface-100));
  }
  .dash-doc-row__total {
    @apply shrink-0 text-sm font-semibold tabular-nums;
  }
  .dash-doc-row__arrow {
    @apply shrink-0 text-muted-foreground opacity-0 transition-opacity;
    width: 14px; height: 14px;
  }
  .dash-doc-row:hover .dash-doc-row__arrow { opacity: 1; }

  .dash-salary-row {
    @apply text-left transition-opacity;
  }
  .dash-salary-row:hover { opacity: 0.7; }
  .dash-salary-row__value {
    @apply text-lg font-bold tabular-nums leading-none;
    color: rgb(212,76,71);
  }
  .dash-salary-row__name {
    @apply text-muted-foreground;
    font-size: 10px;
    margin-top: 4px;
  }

  /* ── Event Card Row ─────────────────── */

  .event-card-row {
    @apply w-full text-left rounded-xl border transition-all cursor-pointer;
    background: rgb(var(--glass-bg));
    border-color: rgba(var(--surface-200) / 0.6);
    border-left-width: 3px;
    display: flex;
    align-items: stretch;
    gap: 0.5rem;
    padding: 0.25rem 0.25rem 0.25rem 0.625rem;
  }
  .event-card-row:hover {
    border-color: rgba(var(--surface-300) / 0.6);
    box-shadow: 0 1px 3px rgba(0,0,0,0.04);
  }

  /* Status left-border accent via data attribute */
  .event-card-row[data-status="lead"],
  .event-card-row[data-status="archived"]  { border-left-color: rgb(var(--surface-300)); }
  .event-card-row[data-status="lead"]:hover,
  .event-card-row[data-status="archived"]:hover { border-left-color: rgb(var(--surface-500)); }

  .event-card-row[data-status="booked"]        { border-left-color: rgb(59 130 246); }  /* blue-500 */
  .event-card-row[data-status="booked"]:hover   { border-left-color: rgb(29 78 216);  }  /* blue-700 */

  .event-card-row[data-status="shooting"]       { border-left-color: rgb(244 63 94);  }  /* rose-500 */
  .event-card-row[data-status="shooting"]:hover  { border-left-color: rgb(190 18 60); }  /* rose-700 */

  .event-card-row[data-status="editing"]        { border-left-color: rgb(245 158 11); }  /* amber-500 */
  .event-card-row[data-status="editing"]:hover   { border-left-color: rgb(180 83 9);  }  /* amber-700 */

  .event-card-row[data-status="delivered"],
  .event-card-row[data-status="completed"]      { border-left-color: rgb(16 185 129); }  /* emerald-500 */
  .event-card-row[data-status="delivered"]:hover,
  .event-card-row[data-status="completed"]:hover { border-left-color: rgb(4 120 87);  }  /* emerald-700 */

  .event-card-row__date {
    @apply shrink-0 rounded-lg border flex flex-col items-center justify-center transition-colors;
    width: 3.25rem;
    padding: 0.25rem 0;
    background: rgb(var(--surface-50));
    border-color: rgba(var(--surface-200) / 0.6);
  }
  .event-card-row:hover .event-card-row__date {
    border-color: rgba(var(--surface-300) / 0.6);
  }
  .event-card-row__date-month {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    line-height: 1;
    color: rgb(var(--surface-500));
  }
  .event-card-row__date-day {
    font-size: 1.375rem;
    font-weight: 700;
    line-height: 1;
    margin-top: 2px;
    color: rgb(var(--surface-900));
  }
  .event-card-row__date-year {
    font-size: 0.6875rem;
    font-weight: 500;
    line-height: 1;
    color: rgb(var(--surface-400));
    margin-top: 2px;
  }
  .event-card-row__date--empty {
    @apply items-center justify-center;
  }

  .event-card-row__body {
    @apply flex-1 min-w-0 flex flex-col justify-center;
  }

  .event-card-row__header {
    @apply flex items-center gap-2 min-w-0;
  }
  .event-card-row__title {
    font-size: 13.5px;
    font-weight: 600;
    line-height: 1.2;
    @apply truncate flex-1;
    color: rgb(var(--surface-900));
  }
  .event-card-row__meta {
    @apply flex items-center gap-1.5 flex-wrap;
    margin-top: 0.375rem;
  }
  .event-card-row__pill {
    font-size: 10px;
    font-weight: 500;
    @apply px-2 py-0.5 rounded-full leading-tight text-[#C8C6C2];
  }
  .event-card-row__chip {
    font-size: 11px;
    @apply px-2 py-0.5 rounded-md leading-tight;
    color: rgb(var(--surface-500));
    background: rgb(var(--surface-50));
  }

  /* Desktop-only details column — hidden on mobile */
  .event-card-row__details {
    display: none;
  }

  /* Desktop: spacious Notion-style two-line layout */
  @media (min-width: 1024px) {
    .event-card-row {
      padding: 0.875rem 1.25rem;
      gap: 1.25rem;
      align-items: center;
      border-radius: 0.625rem;
    }
    .event-card-row:hover {
      background: rgb(var(--surface-50));
      box-shadow: 0 1px 4px rgba(0,0,0,0.03);
    }
    .event-card-row__date {
      width: 3.25rem;
      padding: 0.25rem 0;
      order: 99;
    }
    .event-card-row__date-text {
      display: none;
    }
    /* Keep body as column — title on top, meta below */
    .event-card-row__body {
      flex-direction: column;
      gap: 0;
    }
    .event-card-row__header {
      flex-shrink: 1;
      min-width: 0;
    }
    .event-card-row__title {
      font-size: 14px;
    }
    .event-card-row__meta {
      margin-top: 0.375rem;
      flex-wrap: nowrap;
      flex-shrink: 0;
    }
    .event-card-row__chip {
      font-size: 12px;
    }
    .event-card-row__pill {
      font-size: 10.5px;
    }

    .event-card-row__details {
      display: flex;
      align-items: center;
      gap: 0.875rem;
      margin-left: auto;
      flex-shrink: 0;
    }
    .event-card-row__status {
      font-size: 11px;
      font-weight: 600;
      text-transform: capitalize;
      white-space: nowrap;
      padding: 2px 10px;
      border-radius: 999px;
      background: rgb(var(--surface-50));
      min-width: 76px;
      text-align: center;
    }
    .event-card-row__countdown {
      font-size: 11.5px;
      font-weight: 500;
      white-space: nowrap;
      color: rgb(var(--surface-400));
      font-variant-numeric: tabular-nums;
    }

  }

  /* ── Context Menu ────────────────────── */

  .context-menu {
    position: fixed;
    z-index: 50;
    min-width: 160px;
    padding: 4px;
    background: rgb(var(--glass-bg));
    border: 1px solid rgb(var(--surface-200));
    border-radius: 8px;
    box-shadow: var(--shadow-lg);
    animation: context-menu-in 0.12s ease-out;
  }
  @keyframes context-menu-in {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }
  .context-menu__item {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    padding: 7px 10px;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 500;
    color: rgb(var(--surface-700));
    background: none;
    border: none;
    cursor: pointer;
    transition: background 0.1s;
  }
  .context-menu__item:hover {
    background: rgb(var(--surface-50));
  }
  .context-menu__item--danger {
    color: rgb(239 68 68);
  }
  .context-menu__item--danger:hover {
    background: rgb(254 242 242);
  }
  .context-menu__separator {
    height: 1px;
    margin: 3px 6px;
    background: rgb(var(--surface-100));
  }

  /* ── Project Details (Notion property table) ── */

  /* .project-details extends .content-card — apply both classes on the element */
  .project-details__description {
    padding: 14px 16px;
    border-bottom: 1px solid rgb(var(--surface-100));
    font-size: 13px;
    line-height: 1.6;
    color: rgb(var(--surface-600));
  }
  .project-details__props {
    display: grid;
    grid-template-columns: 1fr;
  }
  .project-details__prop {
    display: flex;
    align-items: baseline;
    gap: 8px;
    padding: 10px 16px;
    border-bottom: 1px solid rgb(var(--surface-100));
    font-size: 13px;
  }
  .project-details__prop:last-child {
    border-bottom: none;
  }
  .project-details__prop-label {
    display: flex;
    align-items: center;
    gap: 6px;
    flex-shrink: 0;
    width: 100px;
    font-size: 12px;
    font-weight: 500;
    color: rgb(var(--surface-400));
  }
  .project-details__prop-icon {
    width: 13px;
    height: 13px;
    flex-shrink: 0;
  }
  .project-details__prop-value {
    display: flex;
    align-items: center;
    gap: 6px;
    color: rgb(var(--surface-700));
    font-weight: 500;
    min-width: 0;
  }
  .project-details__prop-value a {
    color: hsl(211 78% 51%);
    text-decoration: none;
    transition: opacity 0.12s ease;
  }
  .project-details__prop-value a:hover {
    opacity: 0.75;
  }
  .project-details__prop-hint {
    font-size: 11px;
    color: rgb(var(--surface-400));
    font-weight: 400;
  }

  @media (min-width: 768px) {
    .project-details__props {
      grid-template-columns: 1fr 1fr;
    }
    .project-details__prop {
      padding: 11px 20px;
    }
    .project-details__prop-label {
      width: 110px;
    }
    .project-details__description {
      padding: 16px 20px;
    }
    /* Odd prop in 2-col grid: right border */
    .project-details__prop:nth-child(odd) {
      border-right: 1px solid rgb(var(--surface-100));
    }
    /* Fix bottom border for 2-col: last row items have no bottom border */
    .project-details__prop:last-child,
    .project-details__prop:nth-last-child(2):nth-child(odd) {
      border-bottom: none;
    }
  }

  /* ── Divider ────────────────────────── */

  .divider {
    height: 1px;
    background: rgb(var(--surface-200));
  }

  /* ── Table ──────────────────────────── */

  .glass-table {
    @apply w-full text-sm;
  }
  .glass-table thead th {
    @apply text-left font-medium tracking-wide text-xs uppercase;
    color: rgb(var(--surface-500));
    background: rgb(var(--surface-50));
    border-bottom: 1px solid rgb(var(--surface-200));
    padding: 10px 12px;
  }
  .glass-table tbody td {
    @apply align-middle;
    padding: 10px 12px;
    border-bottom: 1px solid rgb(var(--surface-100));
  }
  .glass-table tbody tr:hover {
    background: rgb(var(--surface-50));
  }

  /* ── Gradient text ──────────────────── */

  .text-gradient {
    background: linear-gradient(135deg, hsl(var(--accent)) 0%, hsl(var(--accent) / 0.75) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
}

/* ─── Utility Classes ──────────────────────────────────────────── */

@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}

/* ─── Status Color Overrides ──────────────────────────────────── */

/* GREEN */
.text-green-400, .text-green-300 { color: #15803d; }
.bg-green-400 { background-color: #16a34a; }
.bg-green-500\/10 { background-color: rgba(22, 163, 74, 0.08); }
.bg-green-500\/20 { background-color: rgba(22, 163, 74, 0.12); }

/* RED */
.text-red-400, .text-red-300 { color: #b91c1c; }
.bg-red-400 { background-color: #dc2626; }
.bg-red-500\/10 { background-color: rgba(220, 38, 38, 0.07); }
.bg-red-500\/20 { background-color: rgba(220, 38, 38, 0.12); }
.border-red-500\/20 { border-color: rgba(220, 38, 38, 0.15); }
.border-red-500\/30 { border-color: rgba(220, 38, 38, 0.22); }
.hover\:text-red-400:hover, .hover\:text-red-300:hover { color: #b91c1c; }

/* BLUE */
.text-blue-400, .text-blue-300 { color: #2563eb; }
.bg-blue-500\/10 { background-color: rgba(37, 99, 235, 0.07); }

/* YELLOW */
.text-yellow-400 { color: #a16207; }
.bg-yellow-400 { background-color: #d97706; }
.bg-yellow-500\/10 { background-color: rgba(202, 138, 4, 0.07); }

/* PURPLE */
.text-purple-400 { color: #7c3aed; }
.bg-purple-500\/10 { background-color: rgba(124, 58, 237, 0.07); }
